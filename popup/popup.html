<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="popup.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
</head>
<body>
    <div class="popup-container">
        <div class="header">
            <div class="title-container">
                <img src="/icons/icon128.png" alt="Context Weaver">
                <h1>Context Weaver</h1>
            </div>
            <button id="theme-toggle" class="icon-button">
                <span class="material-icons-round">dark_mode</span>
            </button>
        </div>
        
        <p class="options-hint"><i>Weaver online. Add or remove API keys in plugin options.</i></p>
        
        <div class="input-container">
            <textarea id="text-input" placeholder="Highlight text to weave. You can also edit/input manually..."></textarea>
            <div class="input-footer">
                <span id="char-count">0 characters</span>
                <span id="token-estimate">~0 tokens</span>
            </div>
        </div>

        <div class="controls-container">
            <div class="dropdown-section">
                <label for="model-select">AI Model:</label>
                <div class="select-wrapper">
                    <select id="model-select">
                        <option value="gpt-4o-mini-2024-07-18">4o mini (OpenAI)</option>
                        <option value="o1-mini-2024-09-12">o1 mini (OpenAI)</option>
                        <option value="grok-2">Grok-2 (xAI)</option>
                        <option value="deepseek-chat">V3 Chat (DeepSeek)</option>
                        <option value="deepseek-reasoner">R1 Reasoner (DeepSeek)</option>
                    </select>
                </div>
            </div>

            <div class="dropdown-section">
                <label for="personality-select">Archetype:</label>
                <div class="select-wrapper">
                    <select id="personality-select">
                        <option value="None" class="placeholder-option">Select Archetype</option>
                    </select>
                </div>
            </div>
        </div>

        <button id="send-button" class="primary-button">
            <span class="button-text">Weave</span>
            <div class="loading-spinner"></div>
        </button>

        <div class="output-section">
            <div class="output-header">
                <label id="output-label" for="response">
                    <div class="provider-info">
                        <img id="provider-logo" class="provider-logo" src="" alt="">
                        <span class="model-name">AI Output:</span>
                    </div>
                </label>
                <div class="output-actions">
                    <button id="copy-button" class="icon-button" data-tooltip="Copy to clipboard">
                        <span class="material-icons-round">content_copy</span>
                    </button>
                    <button id="clear-button" class="icon-button" data-tooltip="Clear output">
                        <span class="material-icons-round">close</span>
                    </button>
                </div>
            </div>
            <div id="response" class="response-container"></div>
            <div class="output-footer">
                <span id="output-char-count">0 characters</span>
                <span id="output-token-count">~0 tokens</span>
            </div>
        </div>
    </div>
    <script src="popup.js"></script>
</body>
</html>